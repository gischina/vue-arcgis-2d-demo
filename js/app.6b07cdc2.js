(function(e){function t(t){for(var i,o,n=t[0],l=t[1],c=t[2],p=0,m=[];p<n.length;p++)o=n[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],i=!0,n=1;n<a.length;n++){var l=a[n];0!==r[l]&&(i=!1)}i&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var i={},r={app:0},s=[];function o(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=i,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(a,i,function(t){return e[t]}.bind(null,i));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"1ead":function(e,t,a){},"2c78":function(e,t,a){"use strict";var i=a("5a9c"),r=a.n(i);r.a},"381f":function(e,t,a){"use strict";var i=a("1ead"),r=a.n(i);r.a},"447a":function(e,t,a){"use strict";var i=a("ebd5"),r=a.n(i);r.a},"50c3":function(e,t,a){},"512d":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAM7SURBVEhLtZZdaM1hHMe/o23NjL2IkZmWsOZlydQuLAuJhHCpyIULFIpSXu7QriQv4daFFBfDUmsr81YYG0LMBZvZkdmbvXk55/H5nz1/nf7//zk7qX3q9PR7+Z7feV5+z3NSDGiMGWfHMSW5mfRIdR+lxwPSANnjUqTCTGnNbGlWts1JQMIi/d3StUbpRp+UO0HKSUPgzB3F8E8pNChlT5IOLpUW5YxogohbpKtNOvaUcaK0fpZUMV0qmGyDEO6VnnQww1apoV/aX0ZegQ16cYp46Q8Zc7jamC21xrQOWWccIsSvkldJfi26IPxFeo05fceY1TXWdolQnC/8zqfLKYwdyxXy16N7g96L73S1sAT3WOsDS6zDYVi6+0LaXSNtrJY2M57DDuF32Ux+Abrb6L34irxjL9LZxGXuRv6R6l9JVR+ksnnSxUrpJON97LP4e4g7TCC/gk89ei/+ImxiyRQpi5Pk0PNNutUurSqW9i4gNlUqZzyP3Yj/EfEo5BehS0X/1bpcfEU6WYLcLDT0gsP331I3x7W8aMR2ycNeiL+deBTyHd1k9KMWyUqlP4aiqxRl4ngpE997jzKM3YI/h7iLoxvEF3PSo/iKzKUvWjoR2F84zdmfPBqyWar9MuIbYjyIPRV/mbt35H9C14e+0LpcfEVKabwO1rmZLo9Cp+8olTaw3pceScuvSWsZ07D34S8k7jBAfgO6Neh92KP8j189xpy4acz2B9bh8tOY1+3GNLQZc5/xB3Ysj8lfi+4Zei+BHd/00phN142pidPBPsjbSv4pdL+sKxbfcjmUzmFJuF0vP+dIs5kJIX6GvDTyt6Fj330EFlGGtIv1nk4HX3gp9Yat3wv+OuJ3yNtJ/kx0QQQXceDkHKfpWj9zhdDZQTThP0t8HXkryY+LXba4vGWdnfU+2mgdlmfYG/BXER+N+DOxzC+RDvECNn/iKnmLIyJ9YKzCXox/D/HRSPqPxBsesCMh7iee3U6e4fx8CvFQJUPcIg/v8dqx3hlcGyncS+kcm0zmHSbbeeMjzOgHXe7YvzkAxTNp1org0xW3SIir4wG/ONVelImI8A3ZzHDFjOg96SPp5fp/pL8K+reAYXbnpwAAAABJRU5ErkJggg=="},"53e9":function(e,t,a){"use strict";var i=a("6f7a"),r=a.n(i);r.a},"564f":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("7f7f"),a("cadf"),a("551c"),a("f751"),a("097d");var i=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},s=[],o={},n=o,l=a("2877"),c=Object(l["a"])(n,r,s,!1,null,null,null),u=c.exports,p=a("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},d=[],h={components:{},data:function(){return{}},created:function(){this.esriLoader.loadCss(window.mapConfig.cssUrl)},mounted:function(){},methods:{}},f=h,g=Object(l["a"])(f,m,d,!1,null,"43c99466",null),v=g.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("el-card",{staticClass:"box-card login-container"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[e._v("欢迎登陆")])]),a("div",[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{type:"text",size:"small","auto-complete":"off",placeholder:"用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}},[a("el-button",{attrs:{slot:"prepend",size:"mini",icon:"el-icon-user-solid"},slot:"prepend"})],1)],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password",size:"small","auto-complete":"off",placeholder:"密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[a("el-button",{attrs:{slot:"prepend",size:"mini",icon:"el-icon-lock"},slot:"prepend"})],1)],1),a("el-form-item",{staticStyle:{"margin-bottom":"0px"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"small",loading:e.logining},on:{click:function(t){return e.submitForm()}}},[e._v("登录")])],1)],1)],1)])],1)},b=[],y=window.config,C={data:function(){return{config:y,form:{username:"admin",password:"admin"},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},logining:!1}},methods:{submitForm:function(){var e=this;this.$refs.form.validate((function(t){if(t){e.logining=!0;var a={username:e.form.username,password:e.form.password};e.axios.get(window.mapConfig.OprService.getUser,a).then((function(t){e.logining=!1;var a={username:"admin",roleid:"1",email:"liwei@esrichina.com.cn",description:"易智瑞（中国）信息技术有限公司"};sessionStorage.setItem("user",JSON.stringify(a)),e.$router.push("/vueAJS")})).catch((function(t){e.logining=!1,console.log(t)}))}}))}}},S=C,x=(a("e330"),a("381f"),Object(l["a"])(S,w,b,!1,null,"2d7d5684",null)),F=x.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"viewDiv"}},[a("div",{attrs:{id:"toprightDiv"}}),a("map-tools",{staticClass:"mapToolBar",on:{showComp:e.analysisShow}}),a("base-map-tab",{staticClass:"baseMapTab"}),a("search-input-bar",{staticClass:"searchBar"}),a("div",{ref:"analysisdiv"},[a("analysis-component",{directives:[{name:"show",rawName:"v-show",value:e.analysisshow,expression:"analysisshow"}],staticClass:"analysisDiv",on:{hideComp:e.analysisShow}})],1)],1)},k=[],T=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),z=a("2f62"),R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button-group",{attrs:{id:"toolbar"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"距离测量",placement:"bottom-start"}},[a("el-button",{staticClass:"btnclass",attrs:{size:"medium",type:"primary",icon:"el-icon-files"},on:{click:e.distanceMeasure}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"面积测量",placement:"bottom-start"}},[a("el-button",{staticClass:"btnclass",attrs:{size:"medium",type:"primary",icon:"el-icon-house"},on:{click:e.areaMeasure}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"图层",placement:"bottom-start"}},[a("el-button",{staticClass:"btnclass",attrs:{size:"medium",type:"primary",icon:"el-icon-view"},on:{click:e.createLayerlist}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"图例",placement:"bottom-start"}},[a("el-button",{staticClass:"btnclass",attrs:{size:"medium",type:"primary",icon:"el-icon-date"},on:{click:e.createLegend}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"打印",placement:"bottom-start"}},[a("el-button",{staticClass:"btnclass",attrs:{size:"medium",type:"primary",icon:"el-icon-printer"},on:{click:e.createPrint}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分析",placement:"bottom-start"}},[a("el-button",{staticClass:"btnclass",attrs:{size:"medium",type:"primary",icon:"el-icon-discount"},on:{click:e.createAnalysis}})],1)],1)],1)},D=[],O=a("768b"),M=Object(T["a"])({data:function(){return{view:null,webmap:null,currentWidget:null}},components:{},watch:{},methods:{createAnalysis:function(){this.$emit("showComp",{flag:!0})},removeWidget:function(){this.currentWidget&&(this.view.ui.remove(this.currentWidget),this.currentWidget.destroy(),this.currentWidget=null)},distanceMeasure:function(){var e=this;if(e.currentWidget){if("distance"==e.currentWidget.id)return void this.removeWidget();this.removeWidget()}this.esriLoader.loadModules(["esri/views/MapView","esri/WebMap","esri/widgets/DistanceMeasurement2D","esri/widgets/AreaMeasurement2D"],{url:window.mapConfig.jsapiUrl}).then((function(t){var a=Object(O["a"])(t,4),i=(a[0],a[1],a[2]);a[3];e.currentWidget=new i({id:"distance",view:e.view}),e.currentWidget.viewModel.newMeasurement(),e.view.ui.add(e.currentWidget,"top-right")}))},areaMeasure:function(){var e=this;if(e.currentWidget){if("area"==e.currentWidget.id)return void this.removeWidget();this.removeWidget()}this.esriLoader.loadModules(["esri/views/MapView","esri/WebMap","esri/widgets/DistanceMeasurement2D","esri/widgets/AreaMeasurement2D"],{url:window.mapConfig.jsapiUrl}).then((function(t){var a=Object(O["a"])(t,4),i=(a[0],a[1],a[2],a[3]);e.currentWidget=new i({id:"area",view:e.view}),e.currentWidget.viewModel.newMeasurement(),e.view.ui.add(e.currentWidget,"top-right")}))},createLayerlist:function(){var e=this;if(e.currentWidget){if("layerList"==e.currentWidget.id)return void this.removeWidget();this.removeWidget()}this.esriLoader.loadModules(["esri/views/MapView","esri/widgets/LayerList","esri/WebMap"],{url:window.mapConfig.jsapiUrl}).then((function(t){var a=Object(O["a"])(t,3),i=(a[0],a[1]);a[2];e.currentWidget=new i({id:"layerList",view:e.view}),e.view.ui.add(e.currentWidget,"top-right")}))},createLegend:function(){var e=this;if(e.currentWidget){if("legend"==e.currentWidget.id)return void this.removeWidget();this.removeWidget()}this.esriLoader.loadModules(["esri/views/MapView","esri/widgets/Legend","esri/WebMap"],{url:window.mapConfig.jsapiUrl}).then((function(t){var a=Object(O["a"])(t,3),i=(a[0],a[1]);a[2];if(null!=e.webmap){e.webmap.layers.getItemAt(0);e.currentWidget=new i({id:"legend",view:e.view}),e.view.ui.add(e.currentWidget,"bottom-left")}}))},createPrint:function(){var e=this;if(e.currentWidget){if("print"==e.currentWidget.id)return void this.removeWidget();this.removeWidget()}this.esriLoader.loadModules(["esri/views/MapView","esri/widgets/Print","esri/WebMap"],{url:window.mapConfig.jsapiUrl}).then((function(t){var a=Object(O["a"])(t,3),i=(a[0],a[1]);a[2];e.currentWidget=new i({id:"print",view:e.view,printServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task"}),e.view.ui.add(e.currentWidget,"top-right")}))},createScalebar:function(){var e=this;this.esriLoader.loadModules(["esri/views/MapView","esri/widgets/ScaleBar","esri/WebMap"],{url:window.mapConfig.jsapiUrl}).then((function(t){var a=Object(O["a"])(t,3),i=(a[0],a[1]);a[2];e.scalebar=new i({view:e.view,unit:"dual"}),e.view.ui.add(e.scalebar,"bottom-left")}))}},mounted:function(){},computed:{listenMapView:function(){return this.$store.state.mapStore.mapView}}},"watch",{listenMapView:function(e,t){e&&(this.view=this.$store.state.mapStore.mapView,this.webmap=this.$store.state.mapStore.webmap,this.createScalebar(),this.view.ui.add("toprightDiv","top-right"))}}),A=M,V=(a("447a"),Object(l["a"])(A,R,D,!1,null,"8f683358",null)),j=V.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"baseMapContainer"}},[a("div",{staticClass:"mapborder tile-border"},[a("img",{staticClass:"mapimg",attrs:{src:e.tileSrc},on:{click:function(t){return e.basemapChangeClick("tile")}}}),a("p",{staticClass:"fontp"},[e._v("切片")])]),a("div",{staticClass:"mapborder vtile-border"},[a("img",{staticClass:"mapimg",attrs:{src:e.vectortileSrc},on:{click:function(t){return e.basemapChangeClick("vectortile")}}}),a("p",{staticClass:"fontp"},[e._v("矢量切片")])])])},P=[];function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach((function(t){Object(T["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var G={data:function(){return{currentmap:"tile",tileSrc:a("c1dd"),vectortileSrc:a("b3f2")}},watch:{currentmap:function(e,t){this.basemapChange({newmap:e,oldmap:t})}},methods:U({},Object(z["b"])(["basemapChange"]),{basemapChangeClick:function(e){this.currentmap=e}})},$=G,W=(a("2c78"),Object(l["a"])($,B,P,!1,null,null,null)),_=W.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"searchInputBar"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入测站名称"},nativeOn:{click:function(t){return e.changeResultDivShow(t)}},model:{value:e.siteNameVal,callback:function(t){e.siteNameVal=t},expression:"siteNameVal"}},[a("el-button",{staticClass:"searchbtn",attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchClick},slot:"append"})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.seachBoxshow,expression:"seachBoxshow"}],staticClass:"seachBoxDiv"},[a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.resultBoxShow,expression:"resultBoxShow"}],staticClass:"resultCard"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.totalnumflag,expression:"totalnumflag"}]},[e._v("正在查询...")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.totalnumflag,expression:"!totalnumflag"}]},[e._v("\n          共有\n          "),a("span",{staticStyle:{color:"#FF0000","font-weight":"bold"}},[e._v(e._s(e.totalResultNum))]),e._v("条结果\n        ")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{icon:"el-icon-circle-close",type:"text"},nativeOn:{click:function(t){return e.hideResultBox(t)}}})],1),a("div",{staticClass:"resultListBorder"},e._l(e.currentResultLists,(function(t,i){return a("div",{key:i,staticClass:"listitemdiv"},[a("img",{staticClass:"resultlogo",attrs:{src:e.resultlistlogo}}),a("span",{staticClass:"resulttext",attrs:{id:t.attributes.OBJECTID},on:{click:e.resultItemClick}},[a("span",{staticStyle:{color:"#0000FF","font-size":"14px"}},[e._v(e._s(t.attributes.STNM))]),a("br"),a("span",{staticStyle:{"font-family":"微软雅黑","font-size":"12px"}},[e._v("地址："+e._s(t.attributes.STLC))])])])})),0),a("div",{staticClass:"paginationbar"},[a("el-pagination",{ref:"pagebar",attrs:{background:"",layout:"prev, pager, next",small:"","page-size":e.pagesize,"current-page":e.currentpage,"pager-count":5,total:e.totalResultNum},on:{"current-change":e.pagechange}})],1)]),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:e.tabBoxShow,expression:"tabBoxShow"}],staticClass:"tabBox",on:{"tab-click":e.searchTabChange},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"空间查询",name:"geometry"}},[a("div",{staticClass:"geoQueryContent"},[a("div",{staticClass:"title"},[e._v("\n            当前位置：\n            "),a("span",{staticClass:"titlespan"},[e._v(e._s(e.titleRegionName))])]),a("div",{staticClass:"regionContent"},e._l(e.citylists,(function(t,i){return a("div",{key:i,staticClass:"regionItem"},[a("div",{staticClass:"city",attrs:{id:t.code},on:{click:e.regionChoose}},[e._v(e._s(t.name))]),a("div",{staticClass:"counties"},e._l(t.area,(function(t,i){return a("span",{key:i,staticClass:"county",attrs:{id:t.code},on:{click:e.regionChoose}},[e._v(e._s(t.name))])})),0)])})),0),a("div",{staticClass:"graQueryContent"},[a("span",{staticStyle:{"font-size":"12px","padding-right":"10px"}},[e._v("图形查询：")]),a("i",{staticClass:"el-icon-orange",staticStyle:{"padding-right":"5px",cursor:"pointer"},on:{click:function(t){return e.geomSearchClick("circle")}}}),a("i",{staticClass:"el-icon-house",staticStyle:{"padding-left":"20px",cursor:"pointer"},on:{click:function(t){return e.geomSearchClick("polygon")}}})])])]),a("el-tab-pane",{attrs:{label:"属性查询",name:"attribute"}},[a("el-form",{ref:"attForm",staticClass:"attpanel",attrs:{model:e.sizeForm,"label-width":"70px",size:"mini"}},[a("el-form-item",{attrs:{label:"测点名称",prop:"siteName"}},[a("el-input",{model:{value:e.sizeForm.siteName,callback:function(t){e.$set(e.sizeForm,"siteName",t)},expression:"sizeForm.siteName"}})],1),a("el-form-item",{attrs:{label:"测点编码",prop:"siteCode"}},[a("el-input",{model:{value:e.sizeForm.siteCode,callback:function(t){e.$set(e.sizeForm,"siteCode",t)},expression:"sizeForm.siteCode"}})],1),a("el-form-item",{attrs:{label:"报讯等级",prop:"grade"}},[a("el-select",{attrs:{placeholder:"请选择报讯等级"},model:{value:e.sizeForm.grade,callback:function(t){e.$set(e.sizeForm,"grade",t)},expression:"sizeForm.grade"}},[a("el-option",{attrs:{label:"等级1",value:"1"}}),a("el-option",{attrs:{label:"等级2",value:"2"}}),a("el-option",{attrs:{label:"等级3",value:"3"}}),a("el-option",{attrs:{label:"等级4",value:"4"}}),a("el-option",{attrs:{label:"等级5",value:"5"}}),a("el-option",{attrs:{label:"等级6",value:"6"}}),a("el-option",{attrs:{label:"等级7",value:"7"}})],1)],1),a("el-form-item",{attrs:{label:"站场类别",prop:"siteType"}},[a("el-select",{attrs:{placeholder:"请选择站场类别"},model:{value:e.sizeForm.siteType,callback:function(t){e.$set(e.sizeForm,"siteType",t)},expression:"sizeForm.siteType"}},[a("el-option",{attrs:{label:"PP",value:"PP"}}),a("el-option",{attrs:{label:"MM",value:"MM"}}),a("el-option",{attrs:{label:"RR",value:"RR"}}),a("el-option",{attrs:{label:"ZZ",value:"ZZ"}})],1)],1),a("el-form-item",{attrs:{label:"行业单位",prop:"industryUnit"}},[a("el-select",{attrs:{placeholder:"请选择隶属行业单位"},model:{value:e.sizeForm.industryUnit,callback:function(t){e.$set(e.sizeForm,"industryUnit",t)},expression:"sizeForm.industryUnit"}},[a("el-option",{attrs:{label:"陕西水文",value:"陕西水文"}}),a("el-option",{attrs:{label:"陕西水利",value:"陕西水利"}})],1)],1),a("el-form-item",{attrs:{label:"管理单位",prop:"adminUnit"}},[a("el-select",{attrs:{placeholder:"请选择信息管理单位"},model:{value:e.sizeForm.adminUnit,callback:function(t){e.$set(e.sizeForm,"adminUnit",t)},expression:"sizeForm.adminUnit"}},[a("el-option",{attrs:{label:"西安水情分中心",value:"西安水情分中心"}}),a("el-option",{attrs:{label:"安康水情分中心",value:"安康水情分中心"}}),a("el-option",{attrs:{label:"商洛水情分中心",value:"商洛水情分中心"}}),a("el-option",{attrs:{label:"延安水情分中心",value:"延安水情分中心"}})],1)],1),a("el-form-item",{attrs:{label:"修改时间",prop:"date1"}},[a("el-col",{attrs:{span:24}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"日期"},model:{value:e.sizeForm.date1,callback:function(t){e.$set(e.sizeForm,"date1",t)},expression:"sizeForm.date1"}})],1)],1),a("el-form-item",{attrs:{label:"",prop:"date2"}},[a("el-col",{attrs:{span:24}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"日期"},model:{value:e.sizeForm.date2,callback:function(t){e.$set(e.sizeForm,"date2",t)},expression:"sizeForm.date2"}})],1)],1),a("el-form-item",{attrs:{size:"mini"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.attQuery}},[e._v("查询")]),a("el-button",{on:{click:e.attReset}},[e._v("重置")])],1)],1)],1)],1)],1),a("dialog-bar")],1)},E=[],Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.showMask,expression:"showMask"}],staticClass:"dialog"},[a("div",{staticClass:"dialog-container"},[a("div",{staticClass:"content"},[a("el-form",{ref:"attForm",staticClass:"attpanel",attrs:{model:e.sizeForm,"label-width":"70px",size:"mini"}},[a("el-form-item",{attrs:{label:"测点名称",prop:"STNM"}},[a("el-input",{model:{value:e.sizeForm.STNM,callback:function(t){e.$set(e.sizeForm,"STNM",t)},expression:"sizeForm.STNM"}})],1),a("el-form-item",{attrs:{label:"测点编码",prop:"STCD"}},[a("el-input",{model:{value:e.sizeForm.STCD,callback:function(t){e.$set(e.sizeForm,"STCD",t)},expression:"sizeForm.STCD"}})],1),a("el-form-item",{attrs:{label:"报讯等级",prop:"FRGRD"}},[a("el-select",{attrs:{placeholder:"请选择报讯等级"},model:{value:e.sizeForm.FRGRD,callback:function(t){e.$set(e.sizeForm,"FRGRD",t)},expression:"sizeForm.FRGRD"}},[a("el-option",{attrs:{label:"等级1",value:"1"}}),a("el-option",{attrs:{label:"等级2",value:"2"}}),a("el-option",{attrs:{label:"等级3",value:"3"}}),a("el-option",{attrs:{label:"等级4",value:"4"}}),a("el-option",{attrs:{label:"等级5",value:"5"}}),a("el-option",{attrs:{label:"等级6",value:"6"}}),a("el-option",{attrs:{label:"等级7",value:"7"}})],1)],1),a("el-form-item",{attrs:{label:"站场类别",prop:"STTP"}},[a("el-select",{attrs:{placeholder:"请选择站场类别"},model:{value:e.sizeForm.STTP,callback:function(t){e.$set(e.sizeForm,"STTP",t)},expression:"sizeForm.STTP"}},[a("el-option",{attrs:{label:"PP",value:"PP"}}),a("el-option",{attrs:{label:"MM",value:"MM"}}),a("el-option",{attrs:{label:"RR",value:"RR"}}),a("el-option",{attrs:{label:"ZZ",value:"ZZ"}})],1)],1),a("el-form-item",{attrs:{label:"行业单位",prop:"ATCUNIT"}},[a("el-select",{attrs:{placeholder:"请选择隶属行业单位"},model:{value:e.sizeForm.ATCUNIT,callback:function(t){e.$set(e.sizeForm,"ATCUNIT",t)},expression:"sizeForm.ATCUNIT"}},[a("el-option",{attrs:{label:"陕西水文",value:"陕西水文"}}),a("el-option",{attrs:{label:"陕西水利",value:"陕西水利"}})],1)],1),a("el-form-item",{attrs:{label:"管理单位",prop:"ADMAUTH"}},[a("el-select",{attrs:{placeholder:"请选择信息管理单位"},model:{value:e.sizeForm.ADMAUTH,callback:function(t){e.$set(e.sizeForm,"ADMAUTH",t)},expression:"sizeForm.ADMAUTH"}},[a("el-option",{attrs:{label:"西安水情分中心",value:"西安水情分中心"}}),a("el-option",{attrs:{label:"安康水情分中心",value:"安康水情分中心"}}),a("el-option",{attrs:{label:"商洛水情分中心",value:"商洛水情分中心"}}),a("el-option",{attrs:{label:"延安水情分中心",value:"延安水情分中心"}})],1)],1),a("el-form-item",{attrs:{label:"测站地址",prop:"STLC"}},[a("el-input",{model:{value:e.sizeForm.STLC,callback:function(t){e.$set(e.sizeForm,"STLC",t)},expression:"sizeForm.STLC"}})],1),a("el-form-item",{attrs:{size:"mini"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.clickCancle}},[e._v("取消")]),a("el-button",{on:{click:e.clickSubmit}},[e._v("提交")])],1)],1)],1)])])},H=[],J={props:{},data:function(){return{showMask:null,sizeForm:{STNM:"",STCD:"",FRGRD:"",STTP:"",ATCUNIT:"",ADMAUTH:"",STLC:""}}},methods:{closeMask:function(){this.$store.state.mapStore.dialogShowFlag=!1},clickCancle:function(){var e=this.$store.state.mapStore;this.closeMask(),e.mapView.popup.open({features:[e.selectedFeature]})},getEditFeature:function(){var e,t=this,a=this.$store.state.mapStore;return Object.keys(this.sizeForm).forEach((function(e){a.selectedFeature.attributes[e]=t.sizeForm[e]})),e={updateFeatures:[a.selectedFeature]},e},clickSubmit:function(){var e=this.$store.state.mapStore,t=this.getEditFeature();this.closeMask(),e.siteLayer.applyEdits(t).then((function(t){t.updateFeatureResults.length>0&&(console.log("-------编辑成功-------"),e.selectedFeature.popupTemplate=e.popupTemplate,e.mapView.popup.open({features:[e.selectedFeature]}))})).catch((function(e){console.log("error = ",e.message)}))}},mounted:function(){},computed:{getDialogShowFlag:function(){return this.$store.state.mapStore.dialogShowFlag}},watch:{getDialogShowFlag:function(e,t){if(this.showMask=e,e){var a=this.$store.state.mapStore;this.sizeForm.STNM=a.selectedFeature.attributes.STNM,this.sizeForm.STCD=a.selectedFeature.attributes.STCD,this.sizeForm.FRGRD=a.selectedFeature.attributes.FRGRD,this.sizeForm.STTP=a.selectedFeature.attributes.STTP,this.sizeForm.ATCUNIT=a.selectedFeature.attributes.ATCUNIT,this.sizeForm.ADMAUTH=a.selectedFeature.attributes.ADMAUTH,this.sizeForm.STLC=a.selectedFeature.attributes.STLC}}}},Q=J,Y=(a("ff07"),Object(l["a"])(Q,Z,H,!1,null,"3d8bfe3f",null)),X=Y.exports;function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach((function(t){Object(T["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ee={components:{"dialog-bar":X},data:function(){return{sendVal:null,titleRegionName:null,citylists:null,totalnumflag:!0,resultlistlogo:a("512d"),currentResultLists:null,searchShowText:"正在查询...",totalResultNum:0,siteNameVal:"",seachBoxshow:!1,resultBoxShow:!1,tabBoxShow:!0,activeName:"geometry",pagesize:10,currentpage:1,sizeForm:{siteName:"",siteCode:"",grade:"3",siteType:"PP",industryUnit:"陕西水文",adminUnit:"西安水情分中心",date1:"",data2:""}}},created:function(){this.$root.eventBus.$on("bufferComplete",this.bufferCompleteFunc)},computed:{getSearchResult:function(){return this.$store.state.mapStore.totalResults}},watch:{getSearchResult:function(e,t){if(null!=e){this.currentpage=1;var a=[];this.totalResultNum=e.features.length;for(var i=e.features,r=this.pagesize>this.totalResultNum?this.totalResultNum:this.pagesize,s=0;s<r;s++)a.push(i[s]);this.currentResultLists=a,this.totalnumflag=!1}else console.log("111---")}},methods:K({},Object(z["b"])(["searchByAttribute","geomSearch"]),{searchTabChange:function(e){},attQuery:function(){this.resultBoxShow=!0,this.tabBoxShow=!1,this.totalnumflag=!0,this.searchShowText="正在查询...",this.currentResultLists=null;var e=" 1=1 ";this.sizeForm.siteName.length>0&&(e+=" and STNM like '%"+this.sizeForm.siteName+"%'"),this.sizeForm.siteCode.length>0&&(e+=" and STCD like '%"+this.sizeForm.siteCode+"%'"),e+=" and FRGRD='"+this.sizeForm.grade+"' and STTP='"+this.sizeForm.siteType+"' and ATCUNIT ='"+this.sizeForm.industryUnit+"' and ADMAUTH='"+this.sizeForm.adminUnit+"'",this.searchByAttribute({pwhere:e})},attReset:function(){console.log("aaaa"),this.$refs["attForm"].resetFields()},bufferCompleteFunc:function(e){this.seachBoxshow=!0,this.resultBoxShow=!0,this.tabBoxShow=!1,this.totalnumflag=!0,this.searchShowText="正在查询...",this.currentResultLists=null;var t=this.$store.state.mapStore;this.$options.methods.selectFeatures(e,t,!1)},regionChoose:function(e){var t=e.target.id;console.log(t);var a=this.$store.state.mapStore;this.seachBoxshow=!0,this.resultBoxShow=!0,this.tabBoxShow=!1,this.totalnumflag=!0,this.searchShowText="正在查询...",this.currentResultLists=null,a.mapView.zoom=window.mapConfig.zoom,a.mapView.center=[window.mapConfig.center.x,window.mapConfig.center.y];var i="",r=t.substring(4,6),s=t.substring(0,4);i+="611000"==t?" ADDVCD like '%611%'":"00"==r?" ADDVCD like '%"+s+"%'":" ADDVCD like '%"+t+"%'",this.searchByAttribute({pwhere:i})},resultItemClick:function(e){var t=this.$store.state.mapStore,a=this,i=e.currentTarget.id;a.esriLoader.loadModules(["esri/PopupTemplate","esri/Graphic"],{url:window.mapConfig.jsapiUrl}).then((function(e){var r=Object(O["a"])(e,2),s=(r[0],r[1]);a.currentResultLists.forEach((function(e,a){if(e.attributes.OBJECTID==i){var r=new s({geometry:e.geometry,attributes:e.attributes});r.popupTemplate=t.popupTemplate;var o=[r];t.mapView.popup.open({title:"ffff",location:e.geometry,features:o}),t.mapView.center=e.geometry}}))}))},pagechange:function(e){for(var t=[],a=this.$store.state.mapStore.totalResults.features,i=e*this.pagesize>a.length?a.length:e*this.pagesize,r=(e-1)*this.pagesize;r<i;r++)t.push(a[r]);this.currentResultLists=t},geomSearchClick:function(e){var t=this.$store.state.mapStore,a=this;a.esriLoader.loadModules(["esri/widgets/Sketch/SketchViewModel","esri/Graphic"],{url:window.mapConfig.jsapiUrl}).then((function(i){var r=Object(O["a"])(i,2),s=r[0];r[1];t.highlight&&t.highlight.remove(),t.mapView.popup.close(),t.geoGraphicLayer.removeAll(),t.mapView.map.add(t.geoGraphicLayer);var o=new s({view:t.mapView,layer:t.geoGraphicLayer,pointSymbol:{type:"simple-marker",color:[255,255,255,0],size:"1px",outline:{color:"red",width:0}}});o.create(e),o.on("create",(function(e){"complete"===e.state&&(console.log("bbbbbbbbbbbbbbb"),a.tabBoxShow=!1,a.resultBoxShow=!0,a.tabBoxShow=!1,a.totalnumflag=!0,a.searchShowText="正在查询...",a.currentResultLists=null,a.$options.methods.selectFeatures(e.graphic.geometry,t,!0))}))}))},selectFeatures:function(e,t,a){var i={geometry:e,outFields:["*"],returnGeometry:!0};t.siteLayer.queryFeatures(i).then((function(e){t.totalResults=e,t.mapView.whenLayerView(t.siteLayer).then((function(a){var i=e.features;t.highlight=a.highlight(i)})),a&&t.geoGraphicLayer.removeAll()}))},changeResultDivShow:function(){this.resultBoxShow||(this.seachBoxshow=!this.seachBoxshow)},searchClick:function(){var e=this.$store.state.mapStore;e.highlight&&e.highlight.remove(),e.geoGraphicLayer.removeAll(),e.mapView.popup.close(),this.seachBoxshow=!0,this.resultBoxShow=!0,this.tabBoxShow=!1,this.totalnumflag=!0,this.searchShowText="正在查询...",this.currentResultLists=null,this.searchByAttribute({pwhere:" STNM like '%"+this.siteNameVal+"%'"})},hideResultBox:function(){this.resultBoxShow=!1,this.tabBoxShow=!0,this.currentResultLists=null;var e=this.$store.state.mapStore;e.highlight&&e.highlight.remove(),e.geoGraphicLayer.removeAll(),e.mapView.popup.close()}}),mounted:function(){var e=window.cityConfig;this.citylists=e.city,this.titleRegionName=e.name}},te=ee,ae=(a("726a"),Object(l["a"])(te,I,E,!1,null,"670beb7b",null)),ie=ae.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"analysisCollapse"},[a("el-collapse",{attrs:{accordion:""},on:{change:e.anaCollapseChange}},[a("p",{staticClass:"titletxt"},[a("i",{staticClass:"el-icon-s-grid"}),e._v("\n      分析功能列表\n      "),a("i",{staticClass:"el-icon-circle-close",staticStyle:{position:"absolute",right:"35px",cursor:"pointer"},on:{click:e.hideanalysisComp}})]),a("el-collapse-item",{staticClass:"collapaseitem",attrs:{name:"visual"}},[a("template",{slot:"title"},[a("i",{staticClass:"header-icon el-icon-picture-outline-round",staticStyle:{"padding-right":"6px"}}),e._v("可视化渲染\n      ")]),a("el-radio-group",{on:{change:e.visualChange},model:{value:e.visualradio,callback:function(t){e.visualradio=t},expression:"visualradio"}},[a("div",{staticStyle:{"padding-top":"15px","padding-left":"20px"}},[a("el-radio",{attrs:{label:0}},[e._v("默认值")]),a("el-radio",{attrs:{label:1}},[e._v("分类(颜色)")])],1),a("div",{staticStyle:{"padding-top":"15px","padding-left":"20px"}},[a("el-radio",{attrs:{label:2}},[e._v("唯一值")]),a("el-radio",{attrs:{label:3}},[e._v("热力图")])],1)])],2),a("el-collapse-item",{attrs:{name:"buffer"}},[a("template",{slot:"title"},[a("i",{staticClass:"header-icon el-icon-s-fold",staticStyle:{"padding-right":"6px"}}),e._v("缓冲区查询\n      ")]),a("div",[a("span",{staticStyle:{"font-size":"12px","padding-right":"10px","padding-left":"20px"}},[e._v("缓冲距离："+e._s(e.distanceValue)+" km")]),a("div",{staticStyle:{"padding-left":"20px","padding-right":"20px"}},[a("el-slider",{attrs:{min:10,max:100},model:{value:e.distanceValue,callback:function(t){e.distanceValue=t},expression:"distanceValue"}})],1)]),a("div",[a("span",{staticStyle:{"font-size":"12px","padding-right":"10px","padding-left":"20px"}},[e._v("缓冲图形：")]),a("i",{staticClass:"el-icon-more",staticStyle:{"padding-right":"5px",cursor:"pointer"},on:{click:e.drawBufferPoint}}),a("i",{staticClass:"el-icon-minus",staticStyle:{"padding-left":"20px",cursor:"pointer"},on:{click:e.drawBufferPline}}),a("i",{staticClass:"el-icon-house",staticStyle:{"padding-left":"20px",cursor:"pointer"},on:{click:e.drawBufferPolygon}})])],2),a("el-collapse-item",{attrs:{name:"eCharts"}},[a("template",{slot:"title"},[a("i",{staticClass:"header-icon el-icon-s-opportunity",staticStyle:{"padding-right":"6px"}}),e._v("图表统计(echarts)\n      ")]),a("div",{attrs:{id:"pieChart"}})],2),a("el-collapse-item",{attrs:{name:"route"}},[a("template",{slot:"title"},[a("i",{staticClass:"header-icon el-icon-s-marketing",staticStyle:{"padding-right":"6px"}}),e._v("路径分析\n      ")]),a("div",[e._v("路径分析：")])],2)],1)],1)},se=[],oe=a("313e"),ne=a.n(oe),le={data:function(){return{pieChartData:[],chartPie:null,activeName:"1",visualradio:0,distanceValue:50,bufferGeometry:null,lastAnaVal:null}},methods:{anaCollapseChange:function(e){this.lastAnaVal=e;var t=this,a=this.$store.state.mapStore;if("visual"==e)a.mapView.ui.add(a.siteLegend,"bottom-left");else if("eCharts"==e){a.mapView.ui.remove(a.siteLegend);var i={where:"1=1",outFields:["*"],returnGeometry:!1};a.mapView.whenLayerView(a.siteLayer).then((function(e){a.siteLayer.queryFeatures(i).then((function(e){var a=0,i=0,r=0,s=0,o=0,n=0,l=0,c=0;t.pieChartData=[],e.features.forEach((function(e,t){"1"==e.attributes.FRGRD?a++:"2"==e.attributes.FRGRD?i++:"3"==e.attributes.FRGRD?r++:"4"==e.attributes.FRGRD?s++:"5"==e.attributes.FRGRD?o++:"6"==e.attributes.FRGRD?n++:"7"==e.attributes.FRGRD?l++:c++})),t.pieChartData.push({value:a,name:"等级1"}),t.pieChartData.push({value:i,name:"等级2"}),t.pieChartData.push({value:r,name:"等级3"}),t.pieChartData.push({value:s,name:"等级4"}),t.pieChartData.push({value:o,name:"等级5"}),t.pieChartData.push({value:n,name:"等级6"}),t.pieChartData.push({value:l,name:"等级7"}),t.pieChartData.push({value:c,name:"其他"});var u=ne.a.init(document.getElementById("pieChart"));u.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"horizontal",left:"left",data:["等级1","等级2","等级3","等级4","等级5","等级6","等级7","其他"]},series:[{name:"报讯等级",type:"pie",radius:"55%",center:["50%","60%"],data:t.pieChartData,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})}),(function(e){console.log("查询失败001---"+e.message)}))}))}else a.mapView.ui.remove(a.siteLegend)},hideanalysisComp:function(){var e=this.$store.state.mapStore;this.$emit("hideComp",{flag:!1,val:this.lastAnaVal}),e.mapView.ui.remove(e.siteLegend)},drawBufferPline:function(){var e=this,t=this.$store.state.mapStore;this.esriLoader.loadModules(["esri/views/draw/Draw","esri/Graphic","esri/geometry/geometryEngine","esri/geometry/Polyline"],{url:window.mapConfig.jsapiUrl}).then((function(a){var i=Object(O["a"])(a,4),r=i[0],s=i[1],o=i[2],n=i[3],l=new r({view:t.mapView});v();var c=l.create("polyline");function u(e){if(e.vertices.length>1){var t=d(e);t.selfIntersects?e.preventDefault():p()}}function p(){var a={type:"simple-fill",color:[128,128,128,.6],outline:{color:"#DB7093",width:1}},i=o.geodesicBuffer(e.bufferGeometry,e.distanceValue,"kilometers");t.geoGraphicLayer.add(new s({geometry:i,symbol:a})),e.$root.eventBus.$emit("bufferComplete",i)}function m(e){if(e.vertices.length>1){var t=d(e);t.selfIntersects&&e.preventDefault()}}function d(a){var i=a.vertices;v();var r=new s({geometry:{type:"polyline",paths:i,spatialReference:t.mapView.spatialReference},symbol:{type:"simple-line",color:"#FF8C00",width:3,cap:"round",join:"round"}});e.bufferGeometry=new n({paths:i,spatialReference:t.mapView.spatialReference});var o=f(r.geometry);return o?t.geoGraphicLayer.addMany([r,o]):t.geoGraphicLayer.add(r),{selfIntersects:o}}function h(e){if(e.paths[0].length<3)return!1;var t=e.clone(),a=g(e);return t.removePoint(0,t.paths[0].length-1),o.crosses(a,t)}function f(e){return h(e)?new s({geometry:g(e),symbol:{type:"simple-line",style:"short-dot",width:3.5,color:"yellow"}}):null}function g(e){var a=e.clone(),i=a.removePoint(0,a.paths[0].length-1),r=a.getPoint(0,a.paths[0].length-1);return{type:"polyline",spatialReference:t.mapView.spatialReference,hasZ:!1,paths:[[[r.x,r.y],[i.x,i.y]]]}}function v(){t.highlight&&t.highlight.remove(),t.geoGraphicLayer.removeAll()}t.mapView.focus(),c.on(["vertex-add","vertex-remove","cursor-update","redo","undo"],m),c.on(["draw-complete"],u)}))},drawBufferPolygon:function(){var e=this,t=this.$store.state.mapStore;this.esriLoader.loadModules(["esri/views/draw/Draw","esri/Graphic","esri/geometry/geometryEngine","esri/geometry/Polyline","esri/geometry/Polygon"],{url:window.mapConfig.jsapiUrl}).then((function(a){var i=Object(O["a"])(a,5),r=i[0],s=i[1],o=i[2],n=i[3],l=i[4],c=new r({view:t.mapView});b();var u=c.create("polygon");function p(e){e.vertices.length>1&&(h(e),m())}function m(){var a={type:"simple-fill",color:[128,128,128,.6],outline:{color:"#DB7093",width:1}},i=o.geodesicBuffer(e.bufferGeometry,e.distanceValue,"kilometers",!0),r=o.difference(i,e.bufferGeometry);t.geoGraphicLayer.add(new s({geometry:r,symbol:a})),e.$root.eventBus.$emit("bufferComplete",r)}function d(e){if(e.vertices.length>1){var t=f(e);t.selfIntersects&&e.preventDefault()}}function h(a){var i=a.vertices;b();new s({geometry:{type:"polygon",rings:i,spatialReference:t.mapView.spatialReference},symbol:{type:"simple-fill",color:[128,128,128,.3],outline:{color:"#4169E1",width:1}}});e.bufferGeometry=new l({rings:i,spatialReference:t.mapView.spatialReference})}function f(a){var i=a.vertices;b();var r=new s({geometry:{type:"polyline",paths:i,spatialReference:t.mapView.spatialReference},symbol:{type:"simple-line",color:"#FF8C00",width:3,cap:"round",join:"round"}});e.bufferGeometry=new n({paths:i,spatialReference:t.mapView.spatialReference});var o=v(r.geometry);return o?t.geoGraphicLayer.addMany([r,o]):t.geoGraphicLayer.add(r),{selfIntersects:o}}function g(e){if(e.paths[0].length<3)return!1;var t=e.clone(),a=w(e);return t.removePoint(0,t.paths[0].length-1),o.crosses(a,t)}function v(e){return g(e)?new s({geometry:w(e),symbol:{type:"simple-line",style:"short-dot",width:3.5,color:"yellow"}}):null}function w(e){var a=e.clone(),i=a.removePoint(0,a.paths[0].length-1),r=a.getPoint(0,a.paths[0].length-1);return{type:"polyline",spatialReference:t.mapView.spatialReference,hasZ:!1,paths:[[[r.x,r.y],[i.x,i.y]]]}}function b(){t.highlight&&t.highlight.remove(),t.geoGraphicLayer.removeAll()}t.mapView.focus(),u.on(["cursor-update"],d),u.on(["draw-complete"],p)}))},drawBufferPoint:function(){var e=this,t=this.$store.state.mapStore;this.esriLoader.loadModules(["esri/views/draw/Draw","esri/Graphic","esri/geometry/geometryEngine"],{url:window.mapConfig.jsapiUrl}).then((function(a){var i=Object(O["a"])(a,3),r=i[0],s=i[1],o=i[2],n=new r({view:t.mapView});p();var l=n.create("point");function c(a){var i=a.coordinates,r={type:"point",x:i[0],y:i[1],spatialReference:t.mapView.spatialReference},n={type:"simple-fill",color:[128,128,128,.6],outline:{color:"#DB7093",width:1}},l=o.geodesicBuffer(r,e.distanceValue,"kilometers");t.geoGraphicLayer.add(new s({geometry:l,symbol:n})),e.$root.eventBus.$emit("bufferComplete",l)}function u(e){var a=e.coordinates;p();var i={type:"point",x:a[0],y:a[1],spatialReference:t.mapView.spatialReference},r=new s({geometry:i,symbol:{type:"simple-marker",style:"square",color:"red",size:"16px",outline:{color:[255,255,0],width:3}}});t.geoGraphicLayer.add(r)}function p(){t.highlight&&t.highlight.remove(),t.geoGraphicLayer.removeAll()}t.mapView.focus(),l.on(["cursor-update"],u),l.on(["draw-complete"],c)}))},visualChange:function(e){var t=this.$store.state.mapStore,a=t.siteLayer,i=null;switch(e){case 0:a.renderer=t.originRender;break;case 1:i=window.mapConfig.classBreakColorRender,a.renderer=i;break;case 2:i=window.mapConfig.uniqueRender,a.renderer=i;break;case 3:i=window.mapConfig.heamtmapRender,a.renderer=i;break;default:break}}}},ce=le,ue=(a("9cc9"),Object(l["a"])(ce,re,se,!1,null,null,null)),pe=ue.exports;function me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?me(a,!0).forEach((function(t){Object(T["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):me(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var he={data:function(){return{analysisshow:!1,lastAnaVal:null}},components:{"map-tools":j,"base-map-tab":_,"search-input-bar":ie,"analysis-component":pe},computed:{},watch:{},created:function(){},mounted:function(){this.$store.state.mapStore.analysiswidget=this.$refs.analysisdiv,this.loadTileMap()},methods:de({},Object(z["b"])(["loadTileMap"]),{analysisShow:function(e){e.flag||(this.lastAnaVal=e.val);var t=this.$store.state.mapStore;this.analysisshow=e.flag,e.flag&&"visual"==this.lastAnaVal&&t.mapView.ui.add(t.siteLegend,"bottom-left")}})},fe=he,ge=(a("53e9"),Object(l["a"])(fe,L,k,!1,null,null,null)),ve=ge.exports;i["default"].use(p["a"]);var we=new p["a"]({mode:"history",routes:[{path:"/login",name:"login",component:F},{path:"/",name:"index",component:v,children:[{path:"/vueAJS",name:"vueAJS",component:ve}]}]}),be={mapView:null,webmap:null,tilelayerBase:null,vectortilelayerBase:null,siteLayer:null,countyLayer:null,cityLayer:null,totalResults:null,highlight:null,geoGraphicLayer:null,analysiswidget:null,originRender:null,siteLegend:null,selectedFeature:null,dialogShowFlag:!1,popupTemplate:null},ye={},Ce={basemapChange:function(e,t){i["default"].prototype.esriLoader.loadModules(["esri/layers/VectorTileLayer"],{url:window.mapConfig.jsapiUrl}).then((function(a){var i=Object(O["a"])(a,1),r=i[0],s=t.oldmap,o=t.newmap;switch(s){case"tile":e.mapView.map.remove(e.tilelayerBase);break;case"vectortile":e.mapView.map.remove(e.vectortilelayerBase);break}switch(o){case"tile":e.mapView.map.add(e.tilelayerBase,0);break;case"vectortile":e.vectortilelayerBase?e.mapView.map.add(e.vectortilelayerBase,0):(e.vectortilelayerBase=new r({url:window.mapConfig.TileLayer.vectorTileLayer}),e.mapView.map.add(e.vectortilelayerBase,0));break}}))},searchByAttribute:function(e,t){var a={where:t.pwhere,outFields:["*"],returnGeometry:!0};e.mapView.whenLayerView(e.siteLayer).then((function(t){e.siteLayer.queryFeatures(a).then((function(a){e.totalResults=a;var i=a.features;e.highlight=t.highlight(i)}),(function(e){alert("查询失败---"+e.message)}))}))},loadTileMap:function(e){i["default"].prototype.esriLoader.loadModules(["esri/Map","esri/views/MapView","esri/layers/TileLayer","esri/layers/FeatureLayer","esri/layers/GraphicsLayer","esri/widgets/Legend"],{url:window.mapConfig.jsapiUrl}).then((function(t){var a=Object(O["a"])(t,6),i=a[0],r=a[1],s=a[2],o=a[3],n=a[4],l=a[5];e.tilelayerBase=new s({url:window.mapConfig.TileLayer.waterBaseLayer}),e.geoGraphicLayer=new n({title:"绘制图层"}),e.cityLayer=new o({url:window.mapConfig.waterFeatureLayer.cityLayer});var c={title:"编辑",id:"edit-this",className:"esri-icon-edit"};e.popupTemplate={title:"{STNM}",actions:[c],content:"<p> 测点名称：{STNM}</p><p> 测点编码：{STCD}</p><p> 测点位置1：{STLC}</p><p> 报讯等级：{FRGRD}</p><p> 站场类别：{STTP}</p><p> 行业单位：{ATCUNIT}</p><p> 管理单位：{ADMAUTH}</p>"},e.siteLayer=new o({url:window.mapConfig.waterFeatureLayer.siteLayer,popupTemplate:e.popupTemplate}),e.webmap=new i({}),e.webmap.addMany([e.tilelayerBase,e.cityLayer,e.siteLayer,e.geoGraphicLayer]),e.mapView=new r({container:"viewDiv",map:e.webmap,center:[window.mapConfig.center.x,window.mapConfig.center.y],zoom:window.mapConfig.zoom}),e.mapView.ui.remove("zoom"),e.originRender=e.siteLayer.renderer,e.mapView.popup.on("trigger-action",(function(t){"edit-this"===t.action.id&&(e.dialogShowFlag=!0,e.mapView.popup.close(),e.selectedFeature=e.mapView.popup.selectedFeature)})),e.siteLegend=new l({view:e.mapView,layerInfos:[{layer:e.siteLayer}]})}))}},Se={},xe={state:be,getters:ye,mutations:Ce,actions:Se},Fe={sceneView:null},Le={},ke={setSceneView:function(e,t){e.sceneView=t},loadScene:function(e){i["default"].prototype.esriLoader.loadModules(["esri/Map","esri/views/SceneView","esri/layers/ElevationLayer","esri/layers/TileLayer","esri/layers/SceneLayer","esri/Ground"],{url:window.mapConfig.jsapiUrl}).then((function(t){var a=Object(O["a"])(t,6),i=a[0],r=a[1],s=a[2],o=a[3],n=a[4],l=(a[5],new s({url:window.mapConfig.TileLayer.baseEelevation})),c=new o({url:window.mapConfig.TileLayer.baseImagery}),u=new o({url:window.mapConfig.TileLayer.baseImageryAnno}),p=new n({portalItem:window.mapConfig.SceneLayer.portalItem,popupEnabled:!0}),m={type:"mesh-3d",symbolLayers:[{type:"fill",material:{color:[244,247,134]}}]};p.renderer={type:"simple",symbol:m};var d=new i({});d.ground.layers.add(l),d.addMany([c,u,p]);var h=new r({container:"view3Div",map:d,camera:window.mapConfig.camera});e.sceneView=h}))},loadWebScene:function(e){i["default"].prototype.esriLoader.loadModules(["esri/views/SceneView","esri/WebScene"],{url:window.mapConfig.jsapiUrl}).then((function(t){var a=Object(O["a"])(t,2),i=a[0],r=a[1],s=new r({portalItem:window.mapConfig.WebScene.portalItem}),o=new i({container:"view3Div",map:s});e.sceneView=o}))}},Te={},ze={state:Fe,getters:Le,mutations:ke,actions:Te};i["default"].use(z["a"]);var Re=new z["a"].Store({modules:{mapStore:xe,sceneStore:ze}}),De=a("5c96"),Oe=a.n(De),Me=(a("0fae"),a("7f10"),a("afaa")),Ae=a("bc3a"),Ve=a.n(Ae),je=a("a7fe"),Be=a.n(je);i["default"].use(Be.a,Ve.a),i["default"].use(Oe.a),i["default"].config.productionTip=!1,i["default"].prototype.esriLoader=Me,we.beforeEach((function(e,t,a){var i=JSON.parse(sessionStorage.getItem("user"));i||"login"===e.name||a({path:"/login"}),a()})),new i["default"]({router:we,store:Re,render:function(e){return e(u)},data:{eventBus:new i["default"]}}).$mount("#app")},"5a9c":function(e,t,a){},"6f7a":function(e,t,a){},"726a":function(e,t,a){"use strict";var i=a("a777"),r=a.n(i);r.a},"825c":function(e,t,a){},"9cc9":function(e,t,a){"use strict";var i=a("825c"),r=a.n(i);r.a},a777:function(e,t,a){},b3f2:function(e,t,a){e.exports=a.p+"img/vectortile.5fdc5641.png"},c1dd:function(e,t,a){e.exports=a.p+"img/tile.1ac87edd.png"},e330:function(e,t,a){"use strict";var i=a("50c3"),r=a.n(i);r.a},ebd5:function(e,t,a){},ff07:function(e,t,a){"use strict";var i=a("564f"),r=a.n(i);r.a}});